<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD - <%= tableName %></title>
    <link href="/css/styles.css" rel="stylesheet"> 
</head>
<body class="bg-gray-100 flex">
    <aside class="bg-black text-white w-64 h-screen pl-12 py-6">
        <div class="text-3xl font-bold mb-16 mt-4">FIME</div>
        <nav class="space-y-4">
            <% tables.forEach(table => { %>
                <a href="/dashboard/<%= table %>" class="block py-2 px-4 rounded hover:bg-gray-700"><%= table.toUpperCase() %></a>
            <% }) %>
        </nav>
        <div class="mx-auto">
            <a href="/dashboard">
                <button class="mt-20 ml-10 text-white flex items-center space-x-2">Atras 
                    <svg class="h-4 w-4 ml-2" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M4 10L3.64645 10.3536L3.29289 10L3.64645 9.64645L4 10ZM20.5 18C20.5 18.2761 20.2761 18.5 20 18.5C19.7239 18.5 19.5 18.2761 19.5 18L20.5 18ZM8.64645 15.3536L3.64645 10.3536L4.35355 9.64645L9.35355 14.6464L8.64645 15.3536ZM3.64645 9.64645L8.64645 4.64645L9.35355 5.35355L4.35355 10.3536L3.64645 9.64645ZM4 9.5L14 9.5L14 10.5L4 10.5L4 9.5ZM20.5 16L20.5 18L19.5 18L19.5 16L20.5 16ZM14 9.5C17.5898 9.5 20.5 12.4101 20.5 16L19.5 16C19.5 12.9624 17.0376 10.5 14 10.5L14 9.5Z" fill="#222222"></path> </g>
                    </svg>
                </button>
            </a>
        </div>
    </aside>

    <main class="flex-grow p-20">
        <h1 class="text-2xl font-bold mb-4">Tabla: <%= tableName %></h1>
        <table class="min-w-full bg-gray-100 border border-gray-300">
            <thead>
                <tr>
                    <% if (data.length > 0) { %>
                        <% Object.keys(data[0]).forEach(key => { %>
                            <th class="py-2 px-4 border-b"><%= key %></th>
                        <% }) %>
                        <th class="py-2 px-4 border-b">Acciones</th>
                    <% } else { %>
                        <th class="py-2 px-4 border-b">No hay datos disponibles</th>
                    <% } %>
                </tr>
            </thead>
            <tbody>
                <% data.forEach((row, index) => { %>
                    <tr class="<%= index % 2 === 0 ? 'bg-white' : 'bg-gray-100' %>">
                        <% Object.entries(row).forEach(([key, value]) => { %>
                            <td class="py-2 text-center px-4 border-b"><%= value %></td>
                        <% }) %>
                        <td class="py-2 px-4 border-b text-center">
                            <% if (tableName === 'reports' && Number(row.status_id) === 3) { %>
                                <button class="text-blue-500" onclick="updateStatus(<%= row.id %>)">Resuelta</button>
                            <% } %>
                            <a href="#" class="text-red-500 ml-2">Eliminar</a>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
        <button class="mt-4 bg-green-500 px-4 py-2 rounded">Agregar Nuevo</button>
    </main>
    <script src='/js/cruds.js' ></script>
</body>
</html>
